(this.webpackJsonpcrow=this.webpackJsonpcrow||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),r=n.n(c),i=n(25),s=n.n(i),o=n(9),u=n(24),l=n(11),j=n(12),d=n.n(j),b=n(19),O=n(26);n(47),n(49),n(68);O.a.initializeApp({apiKey:"AIzaSyAQHeRBTyW7udvZhEzsIFMN6eVx4_-pju4",authDomain:"crow-93676.firebaseapp.com",databaseURL:"https://crow-93676.firebaseio.com",projectId:"crow-93676",storageBucket:"crow-93676.appspot.com",messagingSenderId:"253996481344",appId:"1:253996481344:web:e6e6d6fad7d5d91dc7d8a5"});var f=O.a,m=O.a.auth(),x=O.a.firestore(),p=O.a.storage(),h=n(73),v=n(74),g=(n(51),n(76)),w=n(70),N=(n(52),function(e){var t=e.type,n=void 0===t?"button":t,c=e.variant,r=void 0===c?"":c,i=e.className,s=void 0===i?"":i,o=e.buttonClick,u=void 0===o?null:o,l=e.name,j=void 0===l?"":l,d=e.children,b=void 0===d?null:d,O=e.isLoading;return Object(a.jsx)(g.a,{type:n,name:j,variant:r,className:"".concat(s," loading-button"),disabled:O,onClick:u,children:O?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):b})}),y=function(e){var t=e.newAccount,n=e.toggleSubmitting,r=e.isSubmitting,i=Object(c.useState)(""),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(c.useState)(""),O=Object(o.a)(j,2),f=O[0],x=O[1],p=Object(c.useState)(""),g=Object(o.a)(p,2),w=g[0],y=g[1],k=Object(c.useRef)(null),S=Object(c.useState)(null),C=Object(o.a)(S,2),_=C[0],E=C[1],L="error-alram",R=Object(c.useRef)(null),U={enter:100,exit:100},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;E(e),e&&R.current&&I()},I=function(){var e=R.current.classList;e.remove("".concat(L,"-enter-done")),e.add("".concat(L,"-enter-active")),setTimeout((function(){e.remove("".concat(L,"-enter-active")),e.add("".concat(L,"-enter-done"))}),U.enter)},P=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?l(a):"password"===n?x(a):"password2"===n&&y(a)},F=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(a.preventDefault(),n(!0),e.prev=4,!t){e.next=14;break}if(f===w){e.next=10;break}return A("\ube44\ubc00\ubc88\ud638\uac00 \ub2e4\ub974\ub2e4 \uae4c\uc545!"),n(!1),e.abrupt("return");case 10:return e.next=12,m.createUserWithEmailAndPassword(u,f);case 12:e.next=16;break;case 14:return e.next=16,m.signInWithEmailAndPassword(u,f);case 16:A(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),A(e.t0.message);case 22:n(!1);case 23:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(h.a,{onSubmit:F,className:"login__auth-container",children:[Object(a.jsx)(h.a.Control,{name:"email",type:"text",className:"auth-containter--input",placeholder:"Email",required:!0,value:u,onChange:P}),Object(a.jsx)(h.a.Control,{name:"password",type:"password",className:"auth-containter--input",placeholder:"Password",required:!0,value:f,onChange:P}),Object(a.jsx)(v.a,{nodeRef:k,in:t,timeout:200,classNames:"second-password",unmountOnExit:!0,children:Object(a.jsx)(h.a.Control,{ref:k,name:"password2",type:"password",className:"auth-containter--input",placeholder:"Recap Password",required:!0,value:w,onChange:P})}),Object(a.jsx)(N,{type:"submit",variant:"",className:"base-button auth-containter--submit",isLoading:r,children:t?"\uc720\uc800 \uc0dd\uc131":"\ub85c\uadf8\uc778"}),Object(a.jsx)(v.a,{nodeRef:R,in:Boolean(_),timeout:U,classNames:L,mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("span",{ref:R,className:"auth-container--text",children:_})})]})})},k=n(71),S=n(16),C=n(33),_=(n(58),n.p+"static/media/crow.e50c965f.jpg"),E=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],l=s[1];Object(c.useEffect)((function(){u&&n&&r(!1)}),[u]);var j=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return n=t.currentTarget.name,l(!0),"google"===n?a=new f.auth.GoogleAuthProvider:"github"===n&&(a=new f.auth.GithubAuthProvider),setTimeout((function(){l(!1)}),5e3),e.next=8,m.signInWithPopup(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"login-container",children:[Object(a.jsx)("span",{className:"login-container--title",children:"Crow"}),Object(a.jsx)(k.a,{className:"crow-image",src:"".concat(_),roundedCircle:!0}),Object(a.jsx)(y,{newAccount:n,toggleSubmitting:function(e){return l(e)},isSubmitting:u}),Object(a.jsxs)("div",{className:"login-container__option-container",children:[Object(a.jsx)(g.a,{onClick:function(){return r((function(e){return!e}))},variant:"",className:"base-button",children:n?"\ub85c\uadf8\uc778\ud558\uae30":"\uc720\uc800 \uc0dd\uc131\ud558\uae30"}),Object(a.jsxs)(N,{buttonClick:j,name:"google",variant:"",className:"google-button",isLoading:u,children:[Object(a.jsx)(S.a,{icon:C.b}),"\xa0\uad6c\uae00 \ub85c\uadf8\uc778"]}),Object(a.jsxs)(N,{buttonClick:j,name:"github",variant:"",className:"github-button",isLoading:u,children:[Object(a.jsx)(S.a,{icon:C.a}),"\xa0\uae43\ud5c8\ube0c \ub85c\uadf8\uc778"]})]})]})},L=(n(59),function(e){var t=e.userObject,n=e.refreshUser,r=Object(l.g)(),i=Object(c.useState)(t.displayName),s=Object(o.a)(i,2),u=s[0],j=s[1],O=Object(c.useState)(!1),f=Object(o.a)(O,2),x=f[0],p=f[1],v=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:if(p(!0),a.preventDefault(),t.displayName===u){e.next=8;break}return e.next=7,t.updateProfile({displayName:u});case 7:n();case 8:p(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(h.a,{onSubmit:v,className:"profile-form",children:[Object(a.jsx)(h.a.Control,{type:"text",placeholder:"Display name",value:u,onChange:function(e){var t=e.target.value;j(t)},className:"profile-form--input",disabled:x}),Object(a.jsx)(N,{type:"submit",className:"fixed-button profile-btn profile__fixed-button",variant:"",isLoading:x,children:"\ub0b4 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8"})]}),Object(a.jsx)(g.a,{type:"button",className:"cancle-button profile-btn",variant:"",onClick:function(){m.signOut(),r.push("/")},children:"Logout"})]})}),R=n(27),U="crow",A=n(21),I=(n(62),function(e){var t=e.crowObject,n=e.isOwner,r="".concat(U,"/").concat(t.id),i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(c.useState)(t.text),O=Object(o.a)(j,2),f=O[0],m=O[1],w=Object(c.useState)(!1),y=Object(o.a)(w,2),k=y[0],C=y[1],_=Object(c.useRef)(null),E=Object(c.useRef)(null);Object(c.useEffect)((function(){return function(){l(!1),m(null),C(!1)}}),[]);var L=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:if(C(!0),!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c\uc545?")){e.next=9;break}return e.next=7,x.doc(r).delete();case 7:return e.next=9,p.refFromURL(t.imgUrl).delete();case 9:C(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:return C(!0),t.preventDefault(),e.next=6,x.doc(r).update({text:f});case 6:l(!1),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.a,{nodeRef:E,in:u,timeout:500,classNames:"crow-fixed-animation",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("div",{ref:E,children:Object(a.jsxs)(h.a,{className:"crow-card-fixed",onSubmit:R,children:[Object(a.jsx)(h.a.Control,{type:"text",value:f,required:!0,placeholder:"\uae00\uc744 \uc791\uc131\ud574\ub77c \uae4c\uc545~",onChange:function(e){var t=e.target.value;m(t)}}),Object(a.jsx)(N,{type:"submit",isLoading:k,className:"fixed-button",children:"\uc218\uc815"}),Object(a.jsx)(g.a,{type:"button",variant:"",onClick:function(){l(!1),m(t.text)},className:"cancle-button",children:"\ucde8\uc18c"})]})})}),Object(a.jsx)(v.a,{nodeRef:_,in:!u,timeout:500,classNames:"crow-animation",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("div",{ref:_,children:Object(a.jsxs)("div",{className:"crow-card",children:[n&&Object(a.jsxs)("div",{className:"crow-card--btn-group",children:[Object(a.jsx)(g.a,{type:"button",className:"crow-card__btn-edit",variant:"",onClick:function(){l((function(e){return!e}))},children:Object(a.jsx)(S.a,{icon:A.c})}),Object(a.jsx)(N,{type:"button",className:"crow-card__btn-delete",buttonClick:L,isLoading:k,children:Object(a.jsx)(S.a,{icon:A.e})})]}),Object(a.jsx)("span",{className:"crow-card--text",children:t.text}),t.imgUrl&&Object(a.jsx)("img",{src:t.imgUrl,width:"50px",height:"50px",alt:"upload profile"})]})})})]})}),P=n(75),F=(n(63),function(e){var t=e.userObject,n=Object(c.useState)(""),r=Object(o.a)(n,2),i=r[0],s=r[1],u=Object(c.useState)(null),l=Object(o.a)(u,2),j=l[0],O=l[1],f=Object(c.useState)(!1),m=Object(o.a)(f,2),w=m[0],y=m[1],k=Object(c.useRef)(null),C=Object(c.useRef)(null),_=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:if(y(!0),n.preventDefault(),a="",!j){e.next=14;break}return c=p.ref().child("".concat(t.uid,"/").concat(Object(P.a)())),e.next=9,c.putString(j,"data_url");case 9:return r=e.sent,e.next=12,r.ref.getDownloadURL();case 12:a=e.sent,E();case 14:return e.next=16,x.collection(U).add(Object(R.a)({text:i,createdAt:Date.now(),creatorId:t.uid},a&&{imgUrl:a}));case 16:s(""),y(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){k.current.value=null,O(null)};return Object(a.jsx)("div",{className:"crow-contain",children:Object(a.jsxs)(h.a,{onSubmit:_,className:"crow-form",children:[Object(a.jsxs)("div",{className:"crow-form__crow-container",children:[Object(a.jsx)(h.a.Control,{type:"text",placeholder:"\uae4c\uc545!",maxLength:120,value:i,onChange:function(e){var t=e.currentTarget.value;s(t)},disabled:w}),Object(a.jsx)(N,{type:"submit",isLoading:w,children:Object(a.jsx)(S.a,{icon:A.a})})]}),Object(a.jsx)(v.a,{nodeRef:C,in:Boolean(j),timeout:300,classNames:"attach-img",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsxs)("div",{ref:C,children:[Object(a.jsx)("div",{className:"crow-container__image-preview",children:Object(a.jsx)("img",{src:j,width:"50px",height:"50px",alt:"upload image"})}),Object(a.jsx)(g.a,{type:"button",variant:"",className:"btn-remove-image",onClick:E,disabled:w,children:"\uc0ac\uc9c4\uc9c0\uc6b0\uae30"})]})}),!j&&Object(a.jsxs)("label",{htmlFor:"upload_image",className:"crow-container--label",children:["\uc774\ubbf8\uc9c0 \ucd94\uac00\xa0",Object(a.jsx)(S.a,{icon:A.d})]}),Object(a.jsx)(h.a.Control,{type:"file",id:"upload_image",accept:"image/*",ref:k,onChange:function(e){var t=e.target.files,n=Object(o.a)(t,1)[0];if(n){var a=new FileReader;a.onloadend=function(e){O(e.currentTarget.result)},a.readAsDataURL(n)}}})]})})}),D=function(e){var t=e.userObject,n=Object(c.useState)([]),r=Object(o.a)(n,2),i=r[0],s=r[1];return Object(c.useEffect)((function(){return x.collection(U).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(R.a)({id:e.id},e.data())}));s(t)})),function(){s([])}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(F,{userObject:t}),i.map((function(e){return Object(a.jsx)(I,{crowObject:e,isOwner:t.uid===e.creatorId},e.id)}))]})},B=(n(64),function(e){var t=e.userObject;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"navigation",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/",children:Object(a.jsx)(S.a,{icon:A.b,className:"navigation--icon"})})}),Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/profile",children:Object(a.jsx)(S.a,{icon:A.f,className:"navigation--icon"})})})]}),Object(a.jsx)("span",{className:"navigation--user",children:t.displayName}),Object(a.jsx)("span",{className:"navigation--span",children:"\ub2d8\xa0\ud658\uc601\ud569\ub2c8\ub2e4."})]})})}),T=function(e){var t=e.isLoggedIn,n=e.userObject,c=e.refreshUser;return Object(a.jsxs)(u.a,{children:[t&&Object(a.jsx)(B,{userObject:n}),Object(a.jsxs)(l.d,{children:[t?Object(a.jsxs)("div",{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(D,{userObject:n})}),Object(a.jsx)(l.b,{exact:!0,path:"/profile",children:Object(a.jsx)(L,{userObject:n,refreshUser:c})})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(E,{})})}),Object(a.jsx)(l.a,{from:"*",to:"/"})]})]})},q=n(72),z=(n(65),n(66),function(e){var t=e.isLoadded,n=Object(c.useRef)(null);return Object(a.jsx)(v.a,{nodeRef:n,in:!t,timeout:500,classNames:"loading",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("div",{ref:n,className:"body__dimming",children:Object(a.jsx)("div",{className:"dimming__contain",children:Object(a.jsx)(w.a,{className:"dimming--spinner",animation:"border",variant:"light"})})})})});var W=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(c.useState)(!1),d=Object(o.a)(j,2),b=d[0],O=d[1];return Object(c.useEffect)((function(){return m.onAuthStateChanged((function(e){O(!1),l(e?{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0),O(!0)})),function(){l(null)}}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{children:n&&Object(a.jsxs)("article",{className:"main-article",children:["dfffff",Object(a.jsx)(T,{isLoggedIn:Boolean(u),userObject:u,refreshUser:function(){var e=m.currentUser;l({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}})},isLoadded:function(e){return O(e)}})]})}),Object(a.jsx)(z,{isLoadded:b})]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.d6bf23b5.chunk.js.map